---
title: (spring) REST ê´€ë ¨
excerpt: "REST API ì„¤ëª…"
categories:
  - Spring 
tags:
  - Spring
  - eclipse
last_modified_at: 2020-06-06
---

ğŸ’¼ğŸ“ğŸ”‘â° ğŸ“™ğŸ““ğŸ“˜ğŸ“’ğŸ“

```
xml ì˜ˆì œ í”„ë¡œì íŠ¸ : sp5-chap16
```
# ğŸ’¼ REST ë€?
- REST(Representational State Transfer)
- ì›”ë“œ ì™€ì´ë“œ ì›¹ê³¼ ê°™ì€ ë¶„ì‚° í•˜ì´í¼ë¯¸ë””ì–´ ì‹œìŠ¤í…œì„ ìœ„í•œ ì†Œí”„íŠ¸ì›¨ì–´ ì•„í‚¤í…ì²˜ì˜ í•œ í˜•ì‹
- ìì›ì„ ì •ì˜í•˜ê³  ìì›ì— ëŒ€í•œ ì£¼ì†Œë¥¼ ì§€ì •í•˜ëŠ” ë°©ë²• ì „ë°˜ì„ ì˜ë¯¸í•˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì•„í‚¤í…ì²˜ ì›ë¦¬ì˜ ëª¨ìŒ
- ê°„ë‹¨í•œ ì˜ë¯¸ë¡œ ì›¹ ìƒì˜ ìë£Œë¥¼ HTTPìœ„ì—ì„œ ë³„ë„ì˜ ì „ì†¡ ê³„ì¸µ ì—†ì´ ì „ì†¡í•˜ê¸° ìœ„í•œ ì•„ì£¼ ê°„ë‹¨í•œ ì¸í„°í˜ì´ìŠ¤
- ë¦¬ì†ŒìŠ¤ 
	+ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ì‹œìŠ¤í…œì˜ ìì›ìœ¼ë¡œ URIë¡œ ì •ì˜
- ë¦¬ì†ŒìŠ¤ URI ì„¤ê³„ ê·œì¹™ 
	+ URIëŠ” ëª…ì‚¬ ì‚¬ìš© 
	+ ìŠ¬ë˜ì‹œë¡œ ê³„ì¸µ ê´€ê³„ í‘œí˜„ 
	+ ë§ˆì§€ë§‰ì— ìŠ¬ë˜ì‹œ ì‚¬ìš© ê¸ˆì§€ 
	+ ì†Œë¬¸ìë¡œ ì‘ì„± 
	+ ê°€ë…ì„±ì„ ìœ„í•´ í•˜ì´í”ˆ(-)ì€ ì‚¬ìš©í•˜ì§€ë§Œ ë°‘ì¤„(_)ëŠ” ì‚¬ìš© ê¸ˆì§€
- `ajax`ì™€ ê´€ë ¨ìˆë‹¤.
	+ htmlì„ ê°€ì ¸ê°€ì§€ ì•Šê³  ë°ì´í„°ë§Œ ê°€ì ¸ë‹¤ê°€ í™œìš©í•˜ëŠ” ë°©ì‹
- `API` ìˆ˜ìš”ê°€ ë§ì•„ì§ 
- ë¦¬ì†ŒìŠ¤ë¥¼ ì–´ë–¤ì‹ìœ¼ë¡œ í‘œí˜„í•  ê²ƒì¸ì§€ë¥¼ ê³ ì•ˆí•´ì„œ ìƒê¸´ ê°œë…

## ğŸ“ ê°ì²´ë¥¼ JSONìœ¼ë¡œ
- GSON ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©
- `Serialization` : ê°ì²´ì—ì„œ JSONìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ì—­í• ì„ í•œë‹¤.

### ğŸ”‘ JSON ì‘ë‹µ êµ¬í˜„
- `@Controller` + `@ResponseBody`
	+ ìš”ì²­ ì²˜ë¦¬ ë©”ì„œë“œì— @ResponseBodyë¥¼ ì„ ì–¸í•˜ê³  ê°ì²´ë¥¼ ë°˜í™˜í•˜ë©´ jsonìœ¼ë¡œ ë³€í™˜ 
- `@RestController`
	+ ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ì— @Controller ëŒ€ì‹  @RestControllerë¥¼ ì„ ì–¸í•˜ë©´ í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ í´ë˜ìŠ¤ì— í¬í•¨ëœ ëª¨ë“  ìš”ì²­ ì²˜ë¦¬ ë©”ì„œë“œì— ìë™ìœ¼ë¡œ @ResponseBodyê°€ ì„ ì–¸ëœ íš¨ê³¼
- `@JsonIgnore`
	+ íŒ¨ìŠ¤ì›Œë“œì™€ ê°™ì€ ë°ì´í„°ì˜ ë…¸ì¶œì„ ë§‰ê¸° ìœ„í•´ í•„ë“œì— ì„ ì–¸
- `@JsonFormat`
	+ ë‚ ì§œ í‘œí˜„ í˜•ì‹ ë³€ê²½
- `HttpServletResponse` ê°ì²´ë¥¼ í†µí•´ ì‘ë‹µ ì½”ë“œë¥¼ ì„¤ì •í•  ê²½ìš° 404ì™€ ê°™ì´ ì„œë²„ì—ì„œ ì •í•œ ì‘ë‹µ ì»¨í…ì¸ ê°€ ì „ì†¡ë  ìˆ˜ ìˆìŒ 
- ì˜¤ë¥˜ì™€ ê°™ì€ íŠ¹ìˆ˜í•œ ìƒí™©ì—ì„œë„ ì¼ê´€ë˜ê²Œ Json í˜•ì‹ì˜ ë°ì´í„° ì „ì†¡ í•„ìš” 
- `ResponseEntity` ê°ì²´ë¥¼ í†µí•´ ì‘ë‹µ ì½”ë“œì™€ ë©”ì‹œì§€ë¥¼ ì§ì ‘ ê´€ë¦¬í•  ìˆ˜ ìˆìŒ
- `@RequestBody`
	+ ìš”ì²­ ì²˜ë¦¬ ë©”ì„œë“œì˜ ì „ë‹¬ì¸ìì— @RequestBodyë¥¼ ì„ ì–¸í•´ì„œ Json ìš”ì²­ ë°ì´í„°ë¥¼ ê°ì²´ë¡œ ë³€í™˜

# ğŸ’¼ ì›¹ ë¸Œë¼ìš°ì € ìš”ì²­ HTTP ë©”ì„œë“œ í™œì„±í™”
- ì›¹ ë¸Œë¼ìš°ì €ì˜ HTMLì€ POSTì™€ GET ë©”ì„œë“œë§Œ ì§€ì›

- ìŠ¤í”„ë§ì€ `HiddenHttpMethodFilter`ë¥¼ í†µí•´ POST, GET ë¿ë§Œ ì•„ë‹ˆë¼ PUT, DELETE ë©”ì„œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì§€ì›

- ë©”ì„œë“œ í™œì„±í™”ë¥¼ ìœ„í•´ í•„í„° ë“±ë¡

~~~java

~~~

- HTMLì— hidden method field í¬í•¨

~~~html

~~~

- ê° ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë©”ì„œë“œ ë§¤í•‘

~~~java

~~~

# ğŸ’¼ ì„¸íŒ…ê´€ë ¨
**1. pì˜ì¡´ì„± ë¼ì´ë¸ŒëŸ¬ë¦¬ ë“±ë¡ (pom.xml)**
~~~xml
		<dependency>
			<groupId>com.fasterxml.jackson.core</groupId>
			<artifactId>jackson-databind</artifactId>
			<version>2.9.4</version>
		</dependency>
		<!-- java8 date/time -->
		<dependency>
			<groupId>com.fasterxml.jackson.datatype</groupId>
			<artifactId>jackson-datatype-jsr310</artifactId>
			<version>2.9.4</version>
		</dependency>
		<!-- java8 Optional, etc -->
		<dependency>
			<groupId>com.fasterxml.jackson.datatype</groupId>
			<artifactId>jackson-datatype-jdk8</artifactId>
			<version>2.9.4</version>
		</dependency>
~~~

**2. Controller í´ë˜ìŠ¤ @RestController ì–´ë…¸í…Œì´ì…˜ ë“±ë¡**
~~~java
@RestController // @ResponseBodyê°€ í¬í•¨ë˜ì–´ ìˆëŠ” ê²ƒì´ë‹¤.
public class RestMemberController {
	private MemberDao memberDao;
	private MemberRegisterService registerService;

	@GetMapping("/api/members")
	public List<Member> members() {
		return memberDao.selectAll();
	}

	@GetMapping("/api/members/{id}")
	public ResponseEntity<Object> member(@PathVariable Long id) {
		Member member = memberDao.selectById(id);
		if (member == null) {
			return ResponseEntity
					.status(HttpStatus.NOT_FOUND)
					.body(new ErrorResponse("no member"));
			// return ResponseEntity.notFound().build();
		}
		return ResponseEntity.ok(member);
	}
	@PostMapping("/api/members")
	public ResponseEntity<Object> newMember(@RequestBody @Valid RegisterRequest regReq /*,Errors errors */) {
		/*
		if (errors.hasErrors()) {
			String errorCodes = errors.getAllErrors()
					.stream()
					.map(error -> error.getCodes()[0])
					.collect(Collectors.joining(","));
			return ResponseEntity
					.status(HttpStatus.BAD_REQUEST)
					.body(new ErrorResponse("errorCodes = " + errorCodes));
		}
		*/
		try {
			System.out.println(regReq.getEmail());
			Long newMemberId = registerService.regist(regReq);
			URI uri = URI.create("/api/members/" + newMemberId);
			return ResponseEntity.created(uri).build();
		} catch (DuplicateMemberException dupEx) {
			return ResponseEntity.status(HttpStatus.CONFLICT).build();
		}
	}
}
~~~
