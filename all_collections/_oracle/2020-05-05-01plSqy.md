---
title : "PL/SQL 문법"
toc: true
toc_sticky: true
toc_label: "<a href='/database/oracle/'>프로시저</a>"
categories:
  - oracle
tags:
  - 오라클
  - PROCEDURE
  - 함수
  - 프로시저
  - 스토어드 프로시저
last_modified_at : 2020-02-22
---


## PL/SQL 레코드 타입 예제
~~~sql
   SET SERVEROUTPUT ON;
    DECLARE
        TYPE emp_record_type is record
        (emp_no emp.empno%type
        emp_no emp.empno%type
        job emp.job%type);
        
        v_rec1 emp_record_type;
    BEGIN
        SELECT empno
    DBMS_OUTPUT.PUT_LINE(v_row.empno||' '||v_row.ename||' '||v_row.sal);   
    END;
/
execute nmChange;--프로시저를 실행.
~~~
~~~sql
   SET SERVEROUTPUT ON;
    DECLARE
        TYPE dept_record_type is record
        (deptno dept.deptno%type,
        dname dept.dname%type,
        loc dept.loc%type);
        v_dept dept_record_type;
    BEGIN
        SELECT deptno, dname, loc
        INTO v_dept
        FROM dept
        WHERE deptno=30;
    DBMS_OUTPUT.PUT_LINE(v_dept.deptno||' '||v_dept.dname||' '||v_dept.loc);   
    END;
/

select * from dept
~~~

## PL/SQL 컬렉션 타입 예제
~~~sql
- page 
-- TYPE {type_name} IS TABLE OF
-- 프로그래밍의 배열과 같은 구조
-- array는 인덱스 값에 대입하고 인덱스 까지의 크기의 배열이 생성됨
SET SERVEROUTPUT ON
DECLARE
    t_name VARCHAR2(20);
    
    TYPE tbl_emp_name IS TABLE OF
    emp.ename%TYPE INDEX BY BINARY_INTEGER;
    
    v_name tbl_emp_name;
BEGIN
    SELECT ename 
    INTO t_name
    FROM emp
    WHERE empno = 7499;
    
    v_name(0) := t_name;
    DBMS_OUTPUT.PUT_LINE(v_name(0));
    END;
~~~